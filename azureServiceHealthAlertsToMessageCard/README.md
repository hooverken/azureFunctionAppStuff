# Azure Function Apps

## Powershell code for Azure function apps

- **ASHWebhookToMessageCardFn.ps1** is powershell code For a function app that consumes a webhook generated by an Azure Service Health alert using the Common Alert Schema (https://docs.microsoft.com/en-us/azure/azure-monitor/platform/alerts-common-schema) and turns it into a MessageCard which is posted to an outgoing Webhook.

See accompanying implementation file for a qukck summary of the tasks to get this orking in your environment.

**Important** This code assumes that the URI for the outgoing webhook is in an environment variable named **webhookuri**.  You can configure environment variables for function apps in the application settings for the app.

Below is an example of what the generated message card might look like.  Note that the code in this repo does not include the icon that is in the image but it's easy enough to add your own.

![Sample Image](https://github.com/hooverken/azureFunctionAppStuff/blob/main/azureServiceHealthAlertsToMessageCard/TestServiceHealthAlertCard.PNG?raw=true)
