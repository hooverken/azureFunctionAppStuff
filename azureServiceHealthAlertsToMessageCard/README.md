# Azure Function Apps

## Powershell code for Azure function apps

- **ASHWebhookToMessageCardFn.ps1** is powershell code For a function app that consumes a webhook generated by an Azure Service Health alert using the Common Alert Schema (https://docs.microsoft.com/en-us/azure/azure-monitor/platform/alerts-common-schema) and turns it into a MessageCard which is them posted to an outgoing Webhook.  This was originally written to post messages to Teams.  To use it, just paste the code in place of the default code when you create the Powershell function app.

**Important** This code assumes that the URI for the outgoing webhook is in an environment variable named **webhookuri**.  You can configure environment variables for function apps in the application settings for the app.

Below is an example of what the generated message card might look like.  Note that the code in this repo does not include the icon that is in the image but it's easy enough to add your own.

![Sample Image](https://github.com/hooverken/azureFunctionAppStuff/blob/main/azureServiceHealthAlertsToMessageCard/TestServiceHealthAlertCard.PNG?raw=true)
